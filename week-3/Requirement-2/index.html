<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
    <title>My Website</title>
    <link href="style.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript">
        
        window.onload=function(){
            let url = "https://padax.github.io/taipei-day-trip-resources/taipei-attractions-assignment.json";
            let req = new XMLHttpRequest();
            console.log(url);
            req.open( "GET", url);
            req.onload=function(){
                // alert(this.responseText);
                //console.log(JSON.parse(this.responseText));
                spotArray = JSON.parse(this.responseText);
                spotArrayInfo = spotArray.result.results;
                // console.log(spotArrayInfo);
                // console.log(spotArrayInfo.length);

                for (i = 0 ; i < spotArrayInfo.length ; i++){

                    console.log(spotArrayInfo[i].stitle); //景點名稱
                    imgLink = spotArrayInfo[i].file; 
            
                    //console.log(typeof(imgLink));
                    const seperator = ".jpg"
                    imgLinkArray = imgLink.toLowerCase().split(seperator);
                    //console.log(typeof(imgLinkArray));
                    console.log(imgLinkArray[0]+".jpg"); //景點照片
                    
                    //動態新增景點照片到HTML code

                    //新增照片容器
                    let newDiv = document.createElement("div");
                    document.getElementById('gallery').appendChild(newDiv);
                    newDiv.id="image"+i;
                    newDiv.className="image";
                    
                    //item: 照片
                    let newImage = document.createElement("img");
                    newImage.src = imgLinkArray[0]+".jpg";
                    document.getElementById("image"+i).appendChild(newImage);

                    //item: 照片描述
                    let newDescription = document.createElement("div");
                    newDescription.textContent = spotArrayInfo[i].stitle;
                    document.getElementById("image"+i).appendChild(newDescription);
                    newDescription.className="imageDescripiton";
                }
            }
            req.send();
        }
        
        function insertImage(){

        }

    </script>
</head>

<body style="margin: 0px;">

    <div class="top-frame">
        <div class="left">My Website</div>
        <div class="middle"></div>
        <div class="right">
            <div class="item">Item1</div>
            <div class="item">Item2</div>
            <div class="item">Item3</div>
            <div class="item">Item4</div>
            <div class="hamburger_icon">
            <img src="./image/hamburger_icon.png"/>
        </div>
        </div>
    </div>

    <div class="banner">
        <div class="banner-text">Welcome to MyHome</div>
    </div>

    <div class="gallery" id="gallery">
    </div>

</body>
</html>